{"ast":null,"code":"import _asyncToGenerator from \"C:/_git/OpenAI/EwrsDocAnalyses/ClientApp/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/common/http\";\nimport * as i2 from \"../service/http.service\";\nimport * as i3 from \"../service/signalR.service\";\nimport * as i4 from \"ngx-file-drop\";\nimport * as i5 from \"@angular/material/progress-bar\";\nimport * as i6 from \"@angular/common\";\nimport * as i7 from \"@angular/forms\";\nconst _c0 = function (a0) {\n  return {\n    \"color\": a0\n  };\n};\nfunction HomeComponent_li_15_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"li\", 30);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const option_r3 = ctx.$implicit;\n    const ctx_r0 = i0.ɵɵnextContext();\n    i0.ɵɵproperty(\"ngStyle\", i0.ɵɵpureFunction1(2, _c0, ctx_r0.isExcelFile(option_r3) ? \"green\" : \"black\"));\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate(option_r3);\n  }\n}\nfunction HomeComponent_ng_template_22_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵnamespaceSVG();\n    i0.ɵɵelementStart(0, \"svg\", 31);\n    i0.ɵɵelement(1, \"path\", 32);\n    i0.ɵɵelementEnd();\n  }\n}\nfunction HomeComponent_tr_26_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"tr\")(1, \"td\")(2, \"strong\");\n    i0.ɵɵtext(3);\n    i0.ɵɵelementEnd()()();\n  }\n  if (rf & 2) {\n    const item_r5 = ctx.$implicit;\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate(item_r5.relativePath);\n  }\n}\nconst _c1 = function (a0) {\n  return {\n    \"hidden-div\": a0\n  };\n};\nexport class HomeComponent {\n  constructor(http, baseUrl, httpService, signalRService) {\n    this.httpService = httpService;\n    this.signalRService = signalRService;\n    this.files = [];\n    this.docxContent = \"\";\n    this.theText = \"\";\n    this.documentList = [];\n    this.isProgreeBarShow = false;\n    this.baseUrl = baseUrl;\n  }\n  ngOnInit() {\n    var _this = this;\n    return _asyncToGenerator(function* () {\n      _this.metaData = {\n        title: \"\",\n        language: '',\n        type: '',\n        category: '',\n        tags: '',\n        disease: ''\n      };\n      _this.signalRService.startConnection();\n      _this.signalRService.openDataListener();\n      _this.signalRService.onMessage().subscribe( /*#__PURE__*/function () {\n        var _ref = _asyncToGenerator(function* (message) {\n          _this.serverMsg = message;\n          if (_this.serverMsg.msgName == 'newFile') {\n            _this.theText = _this.serverMsg.data;\n          }\n          if (_this.serverMsg.msgName == 'chatGptDone') {\n            _this.isProgreeBarShow = false;\n            _this.getDocumentList();\n          }\n        });\n        return function (_x) {\n          return _ref.apply(this, arguments);\n        };\n      }());\n      _this.getDocumentList();\n    })();\n  }\n  isExcelFile(option) {\n    return option.toLowerCase().endsWith('.xlsx') || option.toLowerCase().endsWith('.xls');\n  }\n  getDocumentList() {\n    const apiUrl = this.baseUrl + \"home/GetDocuments\";\n    this.httpService.xhr({\n      url: apiUrl,\n      method: 'GET'\n    }).subscribe(response => {\n      console.log(response);\n      this.documentList = response;\n    }, error => {\n      console.error('Error:', error);\n    });\n  }\n  getDocListMetadata() {\n    this.isProgreeBarShow = true;\n    const apiUrl = this.baseUrl + \"home/GetDocumentMetadata\";\n    this.httpService.xhr({\n      url: apiUrl,\n      method: 'GET'\n    }).subscribe(response => {}, error => {\n      console.error('Error:', error);\n    });\n  }\n  getMetadata() {\n    const apiUrl = this.baseUrl + \"home/GetMetadata\";\n    this.httpService.xhr({\n      url: apiUrl,\n      method: 'POST',\n      data: this.theText\n    }).subscribe(response => {\n      this.metaData = response;\n    }, error => {\n      console.error('Error:', error);\n    });\n  }\n  dropped(files) {\n    this.files = files;\n    console.log(files);\n    for (const droppedFile of files) {\n      // Is it a file?\n      if (droppedFile.fileEntry.isFile) {\n        const fileEntry = droppedFile.fileEntry;\n        fileEntry.file(file => {\n          this.downloadFile(file);\n        });\n      } else {\n        // It was a directory (empty directories are added, otherwise only files)\n        const fileEntry = droppedFile.fileEntry;\n        console.log(droppedFile.relativePath, fileEntry);\n      }\n    }\n  }\n  fileOver(event) {\n    console.log(event);\n  }\n  fileLeave(event) {\n    console.log(event);\n  }\n  downloadFile(file) {\n    const blob = new Blob([file], {\n      type: file.type\n    });\n    const url = window.URL.createObjectURL(blob);\n    const a = document.createElement('a');\n    a.style.display = 'none';\n    a.href = url;\n    a.download = file.name;\n    document.body.appendChild(a);\n    a.click();\n    window.URL.revokeObjectURL(url);\n  }\n}\nHomeComponent.ɵfac = function HomeComponent_Factory(t) {\n  return new (t || HomeComponent)(i0.ɵɵdirectiveInject(i1.HttpClient), i0.ɵɵdirectiveInject('BASE_URL'), i0.ɵɵdirectiveInject(i2.HttpService), i0.ɵɵdirectiveInject(i3.SignalRService));\n};\nHomeComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n  type: HomeComponent,\n  selectors: [[\"app-home\"]],\n  decls: 80,\n  vars: 12,\n  consts: [[1, \"main\"], [1, \"col-12\"], [\"type\", \"button\", 1, \"btn\", \"btn-success\", \"btn-sm\", \"mt-2\", 3, \"click\"], [\"className\", \"fas fa-edit\"], [1, \"mt-2\"], [\"mode\", \"indeterminate\", 1, \"custom-progress-bar\", 3, \"ngClass\"], [1, \"list-group\", \"mt-3\"], [3, \"ngStyle\", 4, \"ngFor\", \"ngForOf\"], [\"id\", \"file-input-button\", 1, \"btn\", \"btn-secondary\", \"btn-sm\", \"mt-3\"], [1, \"row\"], [\"dropZoneLabel\", \"Drop files here\", \"contentClassName\", \"ngx-file\", \"dropZoneClassName\", \"my-style\", 3, \"onFileDrop\", \"onFileOver\", \"onFileLeave\"], [\"ngx-file-drop-content-tmp\", \"\"], [1, \"upload-table\"], [1, \"table\"], [1, \"upload-name-style\"], [4, \"ngFor\", \"ngForOf\"], [\"type\", \"button\", 1, \"btn\", \"btn-success\", \"btn-sm\", 3, \"click\"], [1, \"col-6\"], [1, \"row\", \"mt-2\"], [1, \"col-3\", \"text-start\"], [1, \"col-9\"], [\"type\", \"text\", \"aria-label\", \"Title\", \"disabled\", \"\", \"readonly\", \"\", 1, \"form-control\", 3, \"value\"], [\"type\", \"text\", \"value\", \"Risk communication\", \"aria-label\", \"Categories\", \"disabled\", \"\", \"readonly\", \"\", 1, \"form-control\"], [\"type\", \"text\", \"aria-label\", \"type\", \"disabled\", \"\", \"readonly\", \"\", 1, \"form-control\", 3, \"value\"], [\"type\", \"text\", \"aria-label\", \"Categories\", \"disabled\", \"\", \"readonly\", \"\", 1, \"form-control\", 3, \"value\"], [\"type\", \"text\", \"value\", \"\", \"aria-label\", \"Categories\", \"disabled\", \"\", \"readonly\", \"\", 1, \"form-control\"], [\"type\", \"text\", \"aria-label\", \"Tags\", \"disabled\", \"\", \"readonly\", \"\", 1, \"form-control\", 3, \"value\"], [1, \"col-2\", \"text-start\"], [1, \"col-10\"], [\"type\", \"text\", \"aria-label\", \"Tags\", \"disabled\", \"\", \"readonly\", \"\", \"rows\", \"14\", 1, \"form-control\", 3, \"ngModel\", \"ngModelChange\"], [3, \"ngStyle\"], [\"xmlns\", \"http://www.w3.org/2000/svg\", \"width\", \"32\", \"height\", \"32\", \"fill\", \"currentColor\", \"viewBox\", \"0 0 16 16\", 1, \"bi\", \"bi-file-earmark-arrow-up-fill\"], [\"d\", \"M9.293 0H4a2 2 0 0 0-2 2v12a2 2 0 0 0 2 2h8a2 2 0 0 0 2-2V4.707A1 1 0 0 0 13.707 4L10 .293A1 1 0 0 0 9.293 0zM9.5 3.5v-2l3 3h-2a1 1 0 0 1-1-1zM6.354 9.854a.5.5 0 0 1-.708-.708l2-2a.5.5 0 0 1 .708 0l2 2a.5.5 0 0 1-.708.708L8.5 8.707V12.5a.5.5 0 0 1-1 0V8.707L6.354 9.854z\"]],\n  template: function HomeComponent_Template(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵelementStart(0, \"div\")(1, \"Head\")(2, \"title\");\n      i0.ɵɵtext(3, \"OpenAI Chatbot\");\n      i0.ɵɵelementEnd()();\n      i0.ɵɵelementStart(4, \"div\", 0)(5, \"h1\");\n      i0.ɵɵtext(6, \"EWRS Documents Analyses\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(7, \"div\", 1)(8, \"button\", 2);\n      i0.ɵɵlistener(\"click\", function HomeComponent_Template_button_click_8_listener() {\n        return ctx.getDocListMetadata();\n      });\n      i0.ɵɵelementStart(9, \"span\");\n      i0.ɵɵelement(10, \"i\", 3);\n      i0.ɵɵelementEnd();\n      i0.ɵɵtext(11, \" Get documents metadata\");\n      i0.ɵɵelementEnd()();\n      i0.ɵɵelementStart(12, \"div\", 4);\n      i0.ɵɵelement(13, \"mat-progress-bar\", 5);\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(14, \"ul\", 6);\n      i0.ɵɵtemplate(15, HomeComponent_li_15_Template, 2, 4, \"li\", 7);\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(16, \"button\", 8);\n      i0.ɵɵtext(17, \"Open File Explorer\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelement(18, \"hr\");\n      i0.ɵɵelementStart(19, \"div\", 9)(20, \"div\", 1)(21, \"ngx-file-drop\", 10);\n      i0.ɵɵlistener(\"onFileDrop\", function HomeComponent_Template_ngx_file_drop_onFileDrop_21_listener($event) {\n        return ctx.dropped($event);\n      })(\"onFileOver\", function HomeComponent_Template_ngx_file_drop_onFileOver_21_listener($event) {\n        return ctx.fileOver($event);\n      })(\"onFileLeave\", function HomeComponent_Template_ngx_file_drop_onFileLeave_21_listener($event) {\n        return ctx.fileLeave($event);\n      });\n      i0.ɵɵtemplate(22, HomeComponent_ng_template_22_Template, 2, 0, \"ng-template\", 11);\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(23, \"div\", 12)(24, \"table\", 13)(25, \"tbody\", 14);\n      i0.ɵɵtemplate(26, HomeComponent_tr_26_Template, 4, 1, \"tr\", 15);\n      i0.ɵɵelementEnd()()()()();\n      i0.ɵɵelementStart(27, \"div\", 1)(28, \"button\", 16);\n      i0.ɵɵlistener(\"click\", function HomeComponent_Template_button_click_28_listener() {\n        return ctx.getMetadata();\n      });\n      i0.ɵɵelementStart(29, \"span\");\n      i0.ɵɵelement(30, \"i\", 3);\n      i0.ɵɵelementEnd();\n      i0.ɵɵtext(31, \" Get metadata\");\n      i0.ɵɵelementEnd()();\n      i0.ɵɵelementStart(32, \"div\", 9)(33, \"div\", 17)(34, \"div\", 18)(35, \"div\", 19);\n      i0.ɵɵtext(36, \" Title \");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(37, \"div\", 20);\n      i0.ɵɵelement(38, \"input\", 21);\n      i0.ɵɵelementEnd()();\n      i0.ɵɵelementStart(39, \"div\", 18)(40, \"div\", 19);\n      i0.ɵɵtext(41, \" Area \");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(42, \"div\", 20);\n      i0.ɵɵelement(43, \"input\", 22);\n      i0.ɵɵelementEnd()();\n      i0.ɵɵelementStart(44, \"div\", 18)(45, \"div\", 19);\n      i0.ɵɵtext(46, \" Type \");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(47, \"div\", 20);\n      i0.ɵɵelement(48, \"input\", 23);\n      i0.ɵɵelementEnd()();\n      i0.ɵɵelementStart(49, \"div\", 18)(50, \"div\", 19);\n      i0.ɵɵtext(51, \" Language \");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(52, \"div\", 20);\n      i0.ɵɵelement(53, \"input\", 24);\n      i0.ɵɵelementEnd()();\n      i0.ɵɵelementStart(54, \"div\", 18)(55, \"div\", 19);\n      i0.ɵɵtext(56, \" Categorie \");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(57, \"div\", 20);\n      i0.ɵɵelement(58, \"input\", 24);\n      i0.ɵɵelementEnd()();\n      i0.ɵɵelementStart(59, \"div\", 18)(60, \"div\", 19);\n      i0.ɵɵtext(61, \" Agent \");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(62, \"div\", 20);\n      i0.ɵɵelement(63, \"input\", 25);\n      i0.ɵɵelementEnd()();\n      i0.ɵɵelementStart(64, \"div\", 18)(65, \"div\", 19);\n      i0.ɵɵtext(66, \" Disease \");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(67, \"div\", 20);\n      i0.ɵɵelement(68, \"input\", 24);\n      i0.ɵɵelementEnd()();\n      i0.ɵɵelementStart(69, \"div\", 18)(70, \"div\", 19);\n      i0.ɵɵtext(71, \" Tags \");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(72, \"div\", 20);\n      i0.ɵɵelement(73, \"input\", 26);\n      i0.ɵɵelementEnd()()();\n      i0.ɵɵelementStart(74, \"div\", 17)(75, \"div\", 18)(76, \"div\", 27);\n      i0.ɵɵtext(77, \" Source \");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(78, \"div\", 28)(79, \"textarea\", 29);\n      i0.ɵɵlistener(\"ngModelChange\", function HomeComponent_Template_textarea_ngModelChange_79_listener($event) {\n        return ctx.theText = $event;\n      });\n      i0.ɵɵelementEnd()()()()()()();\n    }\n    if (rf & 2) {\n      i0.ɵɵadvance(13);\n      i0.ɵɵproperty(\"ngClass\", i0.ɵɵpureFunction1(10, _c1, !ctx.isProgreeBarShow));\n      i0.ɵɵadvance(2);\n      i0.ɵɵproperty(\"ngForOf\", ctx.documentList);\n      i0.ɵɵadvance(11);\n      i0.ɵɵproperty(\"ngForOf\", ctx.files);\n      i0.ɵɵadvance(12);\n      i0.ɵɵproperty(\"value\", ctx.metaData == null ? null : ctx.metaData.title);\n      i0.ɵɵadvance(10);\n      i0.ɵɵproperty(\"value\", ctx.metaData == null ? null : ctx.metaData.type);\n      i0.ɵɵadvance(5);\n      i0.ɵɵproperty(\"value\", ctx.metaData == null ? null : ctx.metaData.language);\n      i0.ɵɵadvance(5);\n      i0.ɵɵproperty(\"value\", ctx.metaData == null ? null : ctx.metaData.category);\n      i0.ɵɵadvance(10);\n      i0.ɵɵproperty(\"value\", ctx.metaData == null ? null : ctx.metaData.disease);\n      i0.ɵɵadvance(5);\n      i0.ɵɵproperty(\"value\", ctx.metaData == null ? null : ctx.metaData.tags);\n      i0.ɵɵadvance(6);\n      i0.ɵɵproperty(\"ngModel\", ctx.theText);\n    }\n  },\n  dependencies: [i4.NgxFileDropComponent, i4.NgxFileDropContentTemplateDirective, i5.MatProgressBar, i6.NgClass, i6.NgForOf, i6.NgStyle, i7.DefaultValueAccessor, i7.NgControlStatus, i7.NgModel],\n  styles: [\".main[_ngcontent-%COMP%], .main[_ngcontent-%COMP%] {\\r\\n  height: 100%;\\r\\n  font-family: Inter, system-ui, Avenir, Helvetica, Arial, sans-serif;\\r\\n  line-height: 1.5;\\r\\n  font-weight: 400;\\r\\n  color-scheme: light dark;\\r\\n  color: rgba(46, 139, 6, 0.87);\\r\\n  font-synthesis: none;\\r\\n  text-rendering: optimizeLegibility;\\r\\n  -webkit-font-smoothing: antialiased;\\r\\n  -moz-osx-font-smoothing: grayscale;\\r\\n  -webkit-text-size-adjust: 100%;\\r\\n}\\r\\n.main[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%] {\\r\\n  width: 34px;\\r\\n}\\r\\n.main[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%] {\\r\\n  font-size: 32px;\\r\\n  line-height: 40px;\\r\\n  font-weight: bold;\\r\\n  color: #202123;\\r\\n  margin: 16px 0 40px;\\r\\n}\\r\\n.main[_ngcontent-%COMP%]   form[_ngcontent-%COMP%] {\\r\\n  display: flex;\\r\\n  flex-direction: column;\\r\\n  width: 320px;\\r\\n  text-align: center;\\r\\n  position: sticky;\\r\\n  bottom: 0;\\r\\n}\\r\\n\\r\\n.main[_ngcontent-%COMP%]   [_ngcontent-%COMP%]::placeholder {\\r\\n  color: #8e8ea0;\\r\\n  opacity: 1;\\r\\n}\\r\\n.main[_ngcontent-%COMP%]   input[type=\\\"submit\\\"][_ngcontent-%COMP%] {\\r\\n  width: 100%;\\r\\n  height: 40px;\\r\\n  border: none;\\r\\n  padding: 10px;\\r\\n  font-size: 1.2rem;\\r\\n}\\r\\n.main[_ngcontent-%COMP%]   .result[_ngcontent-%COMP%] {\\r\\n  font-weight: bold;\\r\\n  margin-top: 40px;\\r\\n}\\r\\n.p[_ngcontent-%COMP%]{\\r\\n  background-color: darkslategray;\\r\\n  max-width: 70%;\\r\\n  padding: 15px;\\r\\n  border-radius: 50px;\\r\\n}\\r\\n.p[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{\\r\\n  margin: 5px;\\r\\n}\\r\\n.p[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:first-child{\\r\\n  margin-right: 0;\\r\\n}\\r\\n.user_msg[_ngcontent-%COMP%]{\\r\\n  text-align: right;\\r\\n  margin-left: 30%;\\r\\n  display: flex;\\r\\n  flex-direction: row-reverse;\\r\\n  background-color: rgb(179, 230, 181);\\r\\n  max-width: 70%;\\r\\n  padding: 15px;\\r\\n  border-radius: 50px;\\r\\n  color: black;\\r\\n}\\r\\n\\r\\n.gpt_msg[_ngcontent-%COMP%]{\\r\\n  background-color: rgb(204, 203, 214);\\r\\n  max-width: 70%;\\r\\n  padding: 15px;\\r\\n  border-radius: 50px;\\r\\n  color: black;\\r\\n}\\r\\n\\r\\n.hide[_ngcontent-%COMP%] {\\r\\n  visibility: hidden;\\r\\n  display: none;\\r\\n}\\r\\n.form[_ngcontent-%COMP%]{\\r\\n  text-align: center;\\r\\n  position: sticky;\\r\\n  bottom: 0;\\r\\n}\\r\\n.input[_ngcontent-%COMP%]{\\r\\n  width: 100%;\\r\\n  height: 40px;\\r\\n  border:1px;\\r\\n  padding: 10px;\\r\\n  font-size: 1.2rem;\\r\\n}\\r\\n.input[_ngcontent-%COMP%]:focus{\\r\\n  outline: none;\\r\\n}\\r\\n.ngx-file[_ngcontent-%COMP%] {\\r\\nborder-left-color:rgb(87, 51, 165);\\r\\nborder: 2px;\\r\\n}\\r\\n\\r\\n.hidden-div[_ngcontent-%COMP%] {\\r\\n  display: none;\\r\\n}\\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8uL3NyYy9hcHAvaG9tZS9ob21lLmNvbXBvbmVudC5jc3MiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IjtBQUNBOzs7Ozs7Ozs7O0VBVUUsWUFBWTtFQUNaLG1FQUFtRTtFQUNuRSxnQkFBZ0I7RUFDaEIsZ0JBQWdCO0VBQ2hCLHdCQUF3QjtFQUN4Qiw2QkFBNkI7RUFDN0Isb0JBQW9CO0VBQ3BCLGtDQUFrQztFQUNsQyxtQ0FBbUM7RUFDbkMsa0NBQWtDO0VBQ2xDLDhCQUE4QjtBQUNoQztBQUNBO0VBQ0UsV0FBVztBQUNiO0FBQ0E7RUFDRSxlQUFlO0VBQ2YsaUJBQWlCO0VBQ2pCLGlCQUFpQjtFQUNqQixjQUFjO0VBQ2QsbUJBQW1CO0FBQ3JCO0FBQ0E7RUFDRSxhQUFhO0VBQ2Isc0JBQXNCO0VBQ3RCLFlBQVk7RUFDWixrQkFBa0I7RUFDbEIsZ0JBQWdCO0VBQ2hCLFNBQVM7QUFDWDtBQUNBOzs7Ozs7Ozs7OztHQVdHO0FBQ0g7RUFDRSxjQUFjO0VBQ2QsVUFBVTtBQUNaO0FBQ0E7RUFDRSxXQUFXO0VBQ1gsWUFBWTtFQUNaLFlBQVk7RUFDWixhQUFhO0VBQ2IsaUJBQWlCO0FBQ25CO0FBQ0E7RUFDRSxpQkFBaUI7RUFDakIsZ0JBQWdCO0FBQ2xCO0FBQ0E7RUFDRSwrQkFBK0I7RUFDL0IsY0FBYztFQUNkLGFBQWE7RUFDYixtQkFBbUI7QUFDckI7QUFDQTtFQUNFLFdBQVc7QUFDYjtBQUNBO0VBQ0UsZUFBZTtBQUNqQjtBQUNBO0VBQ0UsaUJBQWlCO0VBQ2pCLGdCQUFnQjtFQUNoQixhQUFhO0VBQ2IsMkJBQTJCO0VBQzNCLG9DQUFvQztFQUNwQyxjQUFjO0VBQ2QsYUFBYTtFQUNiLG1CQUFtQjtFQUNuQixZQUFZO0FBQ2Q7O0FBRUE7RUFDRSxvQ0FBb0M7RUFDcEMsY0FBYztFQUNkLGFBQWE7RUFDYixtQkFBbUI7RUFDbkIsWUFBWTtBQUNkOztBQUVBO0VBQ0Usa0JBQWtCO0VBQ2xCLGFBQWE7QUFDZjtBQUNBO0VBQ0Usa0JBQWtCO0VBQ2xCLGdCQUFnQjtFQUNoQixTQUFTO0FBQ1g7QUFDQTtFQUNFLFdBQVc7RUFDWCxZQUFZO0VBQ1osVUFBVTtFQUNWLGFBQWE7RUFDYixpQkFBaUI7QUFDbkI7QUFDQTtFQUNFLGFBQWE7QUFDZjtBQUNBO0FBQ0Esa0NBQWtDO0FBQ2xDLFdBQVc7QUFDWDs7QUFFQTtFQUNFLGFBQWE7QUFDZiIsInNvdXJjZXNDb250ZW50IjpbIlxyXG4ubWFpbixcclxuLyogLm1haW4gaW5wdXQge1xyXG4gIFxyXG4gIGZvbnQtc2l6ZTogMTZweDtcclxuICBsaW5lLWhlaWdodDogMjBweDtcclxuICBjb2xvcjogIzM1Mzc0MDtcclxuICBmb250LWZhbWlseTogXCJDb2xmYXhBSVwiLCBIZWx2ZXRpY2EsIHNhbnMtc2VyaWY7XHJcbiAgYm9yZGVyOiAjMTBhMzdmO1xyXG59ICovXHJcbi5tYWluIHtcclxuICBoZWlnaHQ6IDEwMCU7XHJcbiAgZm9udC1mYW1pbHk6IEludGVyLCBzeXN0ZW0tdWksIEF2ZW5pciwgSGVsdmV0aWNhLCBBcmlhbCwgc2Fucy1zZXJpZjtcclxuICBsaW5lLWhlaWdodDogMS41O1xyXG4gIGZvbnQtd2VpZ2h0OiA0MDA7XHJcbiAgY29sb3Itc2NoZW1lOiBsaWdodCBkYXJrO1xyXG4gIGNvbG9yOiByZ2JhKDQ2LCAxMzksIDYsIDAuODcpO1xyXG4gIGZvbnQtc3ludGhlc2lzOiBub25lO1xyXG4gIHRleHQtcmVuZGVyaW5nOiBvcHRpbWl6ZUxlZ2liaWxpdHk7XHJcbiAgLXdlYmtpdC1mb250LXNtb290aGluZzogYW50aWFsaWFzZWQ7XHJcbiAgLW1vei1vc3gtZm9udC1zbW9vdGhpbmc6IGdyYXlzY2FsZTtcclxuICAtd2Via2l0LXRleHQtc2l6ZS1hZGp1c3Q6IDEwMCU7XHJcbn1cclxuLm1haW4gLmljb24ge1xyXG4gIHdpZHRoOiAzNHB4O1xyXG59XHJcbi5tYWluIGgzIHtcclxuICBmb250LXNpemU6IDMycHg7XHJcbiAgbGluZS1oZWlnaHQ6IDQwcHg7XHJcbiAgZm9udC13ZWlnaHQ6IGJvbGQ7XHJcbiAgY29sb3I6ICMyMDIxMjM7XHJcbiAgbWFyZ2luOiAxNnB4IDAgNDBweDtcclxufVxyXG4ubWFpbiBmb3JtIHtcclxuICBkaXNwbGF5OiBmbGV4O1xyXG4gIGZsZXgtZGlyZWN0aW9uOiBjb2x1bW47XHJcbiAgd2lkdGg6IDMyMHB4O1xyXG4gIHRleHQtYWxpZ246IGNlbnRlcjtcclxuICBwb3NpdGlvbjogc3RpY2t5O1xyXG4gIGJvdHRvbTogMDtcclxufVxyXG4vKiAubWFpbiBpbnB1dFt0eXBlPVwidGV4dFwiXSB7XHJcbiAgcGFkZGluZzogMTJweCAxNnB4O1xyXG4gIGJvcmRlcjogMXB4IHNvbGlkICMxMGEzN2Y7XHJcbiAgYm9yZGVyLXJhZGl1czogNHB4O1xyXG4gIG1hcmdpbi1ib3R0b206IDI0cHg7XHJcbiAgb3V0bGluZS1jb2xvcjogIzEwYTM3ZjtcclxuICB3aWR0aDogMTAwJTtcclxuICBoZWlnaHQ6IDQwcHg7XHJcbiAgXHJcbiAgcGFkZGluZzogMTBweDtcclxuICBmb250LXNpemU6IDEuMnJlbTtcclxufSAqL1xyXG4ubWFpbiA6OnBsYWNlaG9sZGVyIHtcclxuICBjb2xvcjogIzhlOGVhMDtcclxuICBvcGFjaXR5OiAxO1xyXG59XHJcbi5tYWluIGlucHV0W3R5cGU9XCJzdWJtaXRcIl0ge1xyXG4gIHdpZHRoOiAxMDAlO1xyXG4gIGhlaWdodDogNDBweDtcclxuICBib3JkZXI6IG5vbmU7XHJcbiAgcGFkZGluZzogMTBweDtcclxuICBmb250LXNpemU6IDEuMnJlbTtcclxufVxyXG4ubWFpbiAucmVzdWx0IHtcclxuICBmb250LXdlaWdodDogYm9sZDtcclxuICBtYXJnaW4tdG9wOiA0MHB4O1xyXG59XHJcbi5we1xyXG4gIGJhY2tncm91bmQtY29sb3I6IGRhcmtzbGF0ZWdyYXk7XHJcbiAgbWF4LXdpZHRoOiA3MCU7XHJcbiAgcGFkZGluZzogMTVweDtcclxuICBib3JkZXItcmFkaXVzOiA1MHB4O1xyXG59XHJcbi5wIHNwYW57XHJcbiAgbWFyZ2luOiA1cHg7XHJcbn1cclxuLnAgc3BhbjpmaXJzdC1jaGlsZHtcclxuICBtYXJnaW4tcmlnaHQ6IDA7XHJcbn1cclxuLnVzZXJfbXNne1xyXG4gIHRleHQtYWxpZ246IHJpZ2h0O1xyXG4gIG1hcmdpbi1sZWZ0OiAzMCU7XHJcbiAgZGlzcGxheTogZmxleDtcclxuICBmbGV4LWRpcmVjdGlvbjogcm93LXJldmVyc2U7XHJcbiAgYmFja2dyb3VuZC1jb2xvcjogcmdiKDE3OSwgMjMwLCAxODEpO1xyXG4gIG1heC13aWR0aDogNzAlO1xyXG4gIHBhZGRpbmc6IDE1cHg7XHJcbiAgYm9yZGVyLXJhZGl1czogNTBweDtcclxuICBjb2xvcjogYmxhY2s7XHJcbn1cclxuXHJcbi5ncHRfbXNne1xyXG4gIGJhY2tncm91bmQtY29sb3I6IHJnYigyMDQsIDIwMywgMjE0KTtcclxuICBtYXgtd2lkdGg6IDcwJTtcclxuICBwYWRkaW5nOiAxNXB4O1xyXG4gIGJvcmRlci1yYWRpdXM6IDUwcHg7XHJcbiAgY29sb3I6IGJsYWNrO1xyXG59XHJcblxyXG4uaGlkZSB7XHJcbiAgdmlzaWJpbGl0eTogaGlkZGVuO1xyXG4gIGRpc3BsYXk6IG5vbmU7XHJcbn1cclxuLmZvcm17XHJcbiAgdGV4dC1hbGlnbjogY2VudGVyO1xyXG4gIHBvc2l0aW9uOiBzdGlja3k7XHJcbiAgYm90dG9tOiAwO1xyXG59XHJcbi5pbnB1dHtcclxuICB3aWR0aDogMTAwJTtcclxuICBoZWlnaHQ6IDQwcHg7XHJcbiAgYm9yZGVyOjFweDtcclxuICBwYWRkaW5nOiAxMHB4O1xyXG4gIGZvbnQtc2l6ZTogMS4ycmVtO1xyXG59XHJcbi5pbnB1dDpmb2N1c3tcclxuICBvdXRsaW5lOiBub25lO1xyXG59XHJcbi5uZ3gtZmlsZSB7XHJcbmJvcmRlci1sZWZ0LWNvbG9yOnJnYig4NywgNTEsIDE2NSk7XHJcbmJvcmRlcjogMnB4O1xyXG59XHJcblxyXG4uaGlkZGVuLWRpdiB7XHJcbiAgZGlzcGxheTogbm9uZTtcclxufSJdLCJzb3VyY2VSb290IjoiIn0= */\"]\n});","map":{"version":3,"mappings":"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","names":["i0","HomeComponent","constructor","http","baseUrl","httpService","signalRService","ngOnInit","metaData","title","language","type","category","tags","disease","startConnection","openDataListener","onMessage","subscribe","message","serverMsg","msgName","theText","data","isProgreeBarShow","getDocumentList","isExcelFile","option","toLowerCase","endsWith","apiUrl","xhr","url","method","response","console","log","documentList","error","getDocListMetadata","getMetadata","dropped","files","droppedFile","fileEntry","isFile","file","downloadFile","relativePath","fileOver","event","fileLeave","blob","Blob","window","URL","createObjectURL","a","document","createElement","style","display","href","download","name","body","appendChild","click","revokeObjectURL","selectors","decls","vars","consts","template","ctx"],"sourceRoot":"","sources":["C:\\_git\\OpenAI\\EwrsDocAnalyses\\ClientApp\\src\\app\\home\\home.component.html","C:\\_git\\OpenAI\\EwrsDocAnalyses\\ClientApp\\src\\app\\home\\home.component.ts"],"sourcesContent":["<div>\r\n\r\n  <Head>\r\n    <title>OpenAI Chatbot</title>\r\n  </Head>\r\n  <div class=\"main\">\r\n    <h1>EWRS Documents Analyses</h1>\r\n\r\n    <div class=\"col-12\">\r\n      <button type=\"button\" class=\"btn btn-success btn-sm mt-2\" (click)=\"getDocListMetadata()\"><span><i\r\n            className=\"fas fa-edit\"></i></span> Get documents metadata</button>\r\n    </div>\r\n    <div class=\"mt-2\">\r\n      <mat-progress-bar mode=\"indeterminate\" class=\"custom-progress-bar\"\r\n        [ngClass]=\"{'hidden-div': !isProgreeBarShow}\"></mat-progress-bar>\r\n    </div>\r\n    <!-- List of documents in folder -->\r\n    <!-- <select size=\"10\" class=\"form-control mt-3\">\r\n      <option *ngFor=\"let option of documentList\" [value]=\"option\" [ngStyle]=\"{'color': isExcelFile(option) ? 'green' : 'black'}\">{{ option }}</option>\r\n    </select> -->\r\n\r\n    <ul class=\"list-group mt-3\">\r\n      <li *ngFor=\"let option of documentList\" [ngStyle]=\"{'color': isExcelFile(option) ? 'green' : 'black'}\">{{ option }}</li>\r\n    </ul>\r\n\r\n    <button id=\"file-input-button\" class=\"btn btn-secondary btn-sm mt-3\">Open File Explorer</button>\r\n\r\n    \r\n\r\n    <hr>\r\n\r\n    <!-- Drop zone -->\r\n    <div class=\"row\">\r\n      <div class=\"col-12\">\r\n        <ngx-file-drop dropZoneLabel=\"Drop files here\" contentClassName=\"ngx-file\" dropZoneClassName=\"my-style\"\r\n          (onFileDrop)=\"dropped($event)\" (onFileOver)=\"fileOver($event)\" (onFileLeave)=\"fileLeave($event)\">\r\n          <ng-template ngx-file-drop-content-tmp let-openFileSelector=\"openFileSelector\">\r\n            <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"32\" height=\"32\" fill=\"currentColor\"\r\n              class=\"bi bi-file-earmark-arrow-up-fill\" viewBox=\"0 0 16 16\">\r\n              <path\r\n                d=\"M9.293 0H4a2 2 0 0 0-2 2v12a2 2 0 0 0 2 2h8a2 2 0 0 0 2-2V4.707A1 1 0 0 0 13.707 4L10 .293A1 1 0 0 0 9.293 0zM9.5 3.5v-2l3 3h-2a1 1 0 0 1-1-1zM6.354 9.854a.5.5 0 0 1-.708-.708l2-2a.5.5 0 0 1 .708 0l2 2a.5.5 0 0 1-.708.708L8.5 8.707V12.5a.5.5 0 0 1-1 0V8.707L6.354 9.854z\" />\r\n            </svg>\r\n          </ng-template>\r\n        </ngx-file-drop>\r\n        <div class=\"upload-table\">\r\n          <table class=\"table\">\r\n            <tbody class=\"upload-name-style\">\r\n              <tr *ngFor=\"let item of files; let i=index\">\r\n                <td><strong>{{ item.relativePath }}</strong></td>\r\n              </tr>\r\n            </tbody>\r\n          </table>\r\n        </div>\r\n      </div>\r\n    </div>\r\n\r\n    <div class=\"col-12\">\r\n      <button type=\"button\" class=\"btn btn-success btn-sm\" (click)=\"getMetadata()\"><span><i\r\n            className=\"fas fa-edit\"></i></span> Get metadata</button>\r\n    </div>\r\n\r\n    <div class=\"row\">\r\n      <div class=\"col-6\">\r\n        <div class=\"row mt-2\">\r\n          <div class=\"col-3 text-start\">\r\n            Title\r\n          </div>\r\n          <div class=\"col-9\">\r\n            <input class=\"form-control\" type=\"text\" [value]=\"metaData?.title\" aria-label=\"Title\" disabled readonly>\r\n          </div>\r\n        </div>\r\n\r\n        <div class=\"row mt-2\">\r\n          <div class=\"col-3 text-start\">\r\n            Area\r\n          </div>\r\n          <div class=\"col-9\">\r\n            <input class=\"form-control\" type=\"text\" value='Risk communication' aria-label=\"Categories\" disabled\r\n              readonly>\r\n          </div>\r\n        </div>\r\n\r\n        <div class=\"row mt-2\">\r\n          <div class=\"col-3 text-start\">\r\n            Type\r\n          </div>\r\n          <div class=\"col-9\">\r\n            <input class=\"form-control\" type=\"text\" [value]=\"metaData?.type\" aria-label=\"type\" disabled readonly>\r\n          </div>\r\n        </div>\r\n\r\n        <div class=\"row mt-2\">\r\n          <div class=\"col-3 text-start\">\r\n            Language\r\n          </div>\r\n          <div class=\"col-9\">\r\n            <input class=\"form-control\" type=\"text\" [value]=\"metaData?.language\" aria-label=\"Categories\" disabled\r\n              readonly>\r\n          </div>\r\n        </div>\r\n\r\n        <div class=\"row mt-2\">\r\n          <div class=\"col-3 text-start\">\r\n            Categorie\r\n          </div>\r\n          <div class=\"col-9\">\r\n            <input class=\"form-control\" type=\"text\" [value]=\"metaData?.category\" aria-label=\"Categories\" disabled\r\n              readonly>\r\n          </div>\r\n        </div>\r\n\r\n        <div class=\"row mt-2\">\r\n          <div class=\"col-3 text-start\">\r\n            Agent\r\n          </div>\r\n          <div class=\"col-9\">\r\n            <input class=\"form-control\" type=\"text\" value=\"\" aria-label=\"Categories\" disabled readonly>\r\n          </div>\r\n        </div>\r\n\r\n        <div class=\"row mt-2\">\r\n          <div class=\"col-3 text-start\">\r\n            Disease\r\n          </div>\r\n          <div class=\"col-9\">\r\n            <input class=\"form-control\" type=\"text\" [value]=\"metaData?.disease\" aria-label=\"Categories\" disabled\r\n              readonly>\r\n          </div>\r\n        </div>\r\n\r\n        <div class=\"row mt-2\">\r\n          <div class=\"col-3 text-start\">\r\n            Tags\r\n          </div>\r\n          <div class=\"col-9\">\r\n            <input class=\"form-control\" type=\"text\" [value]=\"metaData?.tags\" aria-label=\"Tags\" disabled readonly>\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      <div class=\"col-6\">\r\n        <div class=\"row mt-2\">\r\n          <div class=\"col-2 text-start\">\r\n            Source\r\n          </div>\r\n          <div class=\"col-10\">\r\n            <textarea class=\"form-control\" type=\"text\" [(ngModel)]=\"theText\" aria-label=\"Tags\" disabled readonly\r\n              rows=\"14\"></textarea>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>","import { Component, Inject } from '@angular/core';\r\nimport { HttpClient, HttpHeaders } from '@angular/common/http';\r\nimport { HttpSettings, HttpService } from '../service/http.service';\r\nimport { Observable } from 'rxjs';\r\nimport { NgxFileDropEntry, FileSystemFileEntry, FileSystemDirectoryEntry } from 'ngx-file-drop';\r\nimport { SignalRService } from '../service/signalR.service';\r\nimport { ServerMsg } from '../class/serverMsg';\r\nimport { MetaData } from '../class/metaData';\r\nimport {MatProgressBarModule} from '@angular/material/progress-bar';\r\n\r\n\r\n@Component({\r\n  selector: 'app-home',\r\n  templateUrl: './home.component.html',\r\n  styleUrls: ['./home.component.css']\r\n})\r\nexport class HomeComponent {\r\n\r\n  private baseUrl: string;\r\n  public files: NgxFileDropEntry[] = [];\r\n  public docxContent: string = \"\";\r\n  public serverMsg: ServerMsg | undefined;\r\n  public theText:string = \"\";\r\n  public metaData: MetaData | undefined;\r\n  public documentList: string[] = [];\r\n  public isProgreeBarShow: boolean = false;\r\n\r\n  constructor(http: HttpClient,\r\n    @Inject('BASE_URL') baseUrl: string,\r\n    private httpService: HttpService,\r\n    private signalRService: SignalRService,) {\r\n    this.baseUrl = baseUrl;\r\n  }\r\n\r\n  async ngOnInit() {\r\n    this.metaData = { title: \"\", language: '', type: '', category: '', tags:'', disease: ''};\r\n\r\n    this.signalRService.startConnection();\r\n    this.signalRService.openDataListener();\r\n\r\n    this.signalRService.onMessage().subscribe(async (message: ServerMsg) => {\r\n      this.serverMsg = message;\r\n      if (this.serverMsg.msgName == 'newFile') {\r\n        this.theText = this.serverMsg.data;\r\n      }\r\n      if (this.serverMsg.msgName == 'chatGptDone') {\r\n        this.isProgreeBarShow = false;\r\n        this.getDocumentList();\r\n      }\r\n    });\r\n\r\n   this.getDocumentList();\r\n  }\r\n\r\n  isExcelFile(option: string): boolean {\r\n    return option.toLowerCase().endsWith('.xlsx') || option.toLowerCase().endsWith('.xls');\r\n  }\r\n\r\n  getDocumentList() {\r\n    const apiUrl = this.baseUrl + \"home/GetDocuments\"; \r\n    this.httpService.xhr<any>({ url: apiUrl, method: 'GET' }).subscribe(\r\n      (response) => {\r\n        console.log(response);\r\n        this.documentList = response;\r\n      },\r\n      (error) => {\r\n        console.error('Error:', error);\r\n      }\r\n    );\r\n  }\r\n\r\n  getDocListMetadata() {\r\n    this.isProgreeBarShow = true;\r\n    const apiUrl = this.baseUrl + \"home/GetDocumentMetadata\";\r\n    this.httpService.xhr<any>({ url: apiUrl, method: 'GET' }).subscribe(\r\n      (response) => {\r\n      },\r\n      (error) => {\r\n        console.error('Error:', error);\r\n      }\r\n    );\r\n  }\r\n\r\n  getMetadata() {\r\n    const apiUrl = this.baseUrl + \"home/GetMetadata\";\r\n\r\n    this.httpService.xhr<any>({ url: apiUrl, method: 'POST', data: this.theText }).subscribe(\r\n      (response) => {\r\n       this.metaData = response;\r\n      },\r\n      (error) => {\r\n        console.error('Error:', error);\r\n      }\r\n    );\r\n  }\r\n\r\n  public dropped(files: NgxFileDropEntry[]) {\r\n    this.files = files;\r\n    console.log(files);\r\n    for (const droppedFile of files) {\r\n\r\n      // Is it a file?\r\n      if (droppedFile.fileEntry.isFile) {\r\n        const fileEntry = droppedFile.fileEntry as FileSystemFileEntry;\r\n        fileEntry.file((file: File) => {\r\n          this.downloadFile(file);\r\n        });\r\n      } else {\r\n        // It was a directory (empty directories are added, otherwise only files)\r\n        const fileEntry = droppedFile.fileEntry as FileSystemDirectoryEntry;\r\n        console.log(droppedFile.relativePath, fileEntry);\r\n      }\r\n    }\r\n  }\r\n\r\n  public fileOver(event: any) {\r\n    console.log(event);\r\n  }\r\n\r\n  public fileLeave(event: any) {\r\n    console.log(event);\r\n  }\r\n\r\n  private downloadFile(file: File) {\r\n    const blob = new Blob([file], { type: file.type });\r\n    const url = window.URL.createObjectURL(blob);\r\n    const a = document.createElement('a');\r\n    a.style.display = 'none';\r\n    a.href = url;\r\n    a.download = file.name;\r\n    document.body.appendChild(a);\r\n    a.click();\r\n    window.URL.revokeObjectURL(url);\r\n  }\r\n}\r\n\r\n"]},"metadata":{},"sourceType":"module","externalDependencies":[]}